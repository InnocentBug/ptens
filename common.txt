include $(ROOTDIR)/config.txt

CNINE_INCLUDES=-I$(CNINE_ROOT)/include 
CNINE_INCLUDES+=-I$(CNINE_ROOT)/algorithms
CNINE_INCLUDES+=-I$(CNINE_ROOT)/combinatorial
CNINE_INCLUDES+=-I$(CNINE_ROOT)/containers
CNINE_INCLUDES+=-I$(CNINE_ROOT)/math
CNINE_INCLUDES+=-I$(CNINE_ROOT)/utility
CNINE_INCLUDES+=-I$(CNINE_ROOT)/hpc
CNINE_INCLUDES+=-I$(CNINE_ROOT)/wrappers
CNINE_INCLUDES+=-I$(CNINE_ROOT)/matrices 
CNINE_INCLUDES+=-I$(CNINE_ROOT)/tensors 
CNINE_INCLUDES+=-I$(CNINE_ROOT)/tensors/functions  
CNINE_INCLUDES+=-I$(CNINE_ROOT)/tensor_views

CNINE_LEGACY=-I$(CNINE_ROOT)/legacy/scalar 
CNINE_LEGACY+=-I$(CNINE_ROOT)/legacy/matrix 
CNINE_LEGACY+=-I$(CNINE_ROOT)/legacy/tensor 
CNINE_LEGACY+=-I$(CNINE_ROOT)/legacy/tensor_views 
CNINE_LEGACY+=-I$(CNINE_ROOT)/legacy/tensor_array 
CNINE_LEGACY+=-I$(CNINE_ROOT)/legacy/backendA 
CNINE_LEGACY+=-I$(CNINE_ROOT)/legacy/backendB 
CNINE_LEGACY+=-I$(CNINE_ROOT)/legacy/tensor_array/cell_maps 
CNINE_LEGACY+=-I$(CNINE_ROOT)/legacy/tensor_array/cell_ops 
CNINE_LEGACY+=-I$(CNINE_ROOT)/legacy/ntensor 
CNINE_LEGACY+=-I$(CNINE_ROOT)/legacy/labeled2 
CNINE_LEGACY+=-I$(CNINE_ROOT)/legacy/ntensor/functions 


CNINE_INCLUDEDIR=$(CNINE_ROOT)/include
CNINE_CUDADIR=$(CNINE_ROOT)/cuda

INCLUDEDIR=$(ROOTDIR)/include
CACHESDIR=$(ROOTDIR)/caches
CUDADIR=$(ROOTDIR)/cuda
TENSORSDIR=$(ROOTDIR)/tensors
OLDLAYERSDIR=$(ROOTDIR)/old_layers
LAYERSDIR=$(ROOTDIR)/layers
LAYERSBACKENDDIR=$(ROOTDIR)/layers/backend
BATCHEDDIR=$(ROOTDIR)/batched
BATCHEDBACKENDDIR=$(ROOTDIR)/batched/backend

PTENS_INCLUDES=
PTENS_INCLUDES+=-I$(INCLUDEDIR)
PTENS_INCLUDES+=-I$(CACHESDIR)
PTENS_INCLUDES+=-I$(CUDADIR)
PTENS_INCLUDES+=-I$(TENSORSDIR)
#PTENS_INCLUDES+=-I$(OLDLAYERSDIR)
PTENS_INCLUDES+=-I$(LAYERSDIR)
PTENS_INCLUDES+=-I$(LAYERSBACKENDDIR)
PTENS_INCLUDES+=-I$(BATCHEDDIR)
PTENS_INCLUDES+=-I$(BATCHEDBACKENDDIR)

CFLAGS= -std=c++17 -O3 -ferror-limit=1  
INCLUDE= -I $(ROOTDIR)/include 
LIBS= -lstdc++ -lm -lpthread 



MACROS+=-DCNINE_RANGE_CHECKING 
#MACROS+=-DCNINE_COPY_WARNINGS
#MACROS+=-DCNINE_MOVE_WARNINGS
#MACROS+=-DCNINE_ASSIGN_WARNINGS
#MACROS+=-DCNINE_MOVEASSIGN_WARNINGS

ifdef WITH_CUDA
MACROS+=-D_WITH_CUDA
endif 

ifdef WITH_CUBLAS
MACROS+=-D_WITH_CUBLAS
endif 

ifdef EIGENDIR
MACROS+=-D_WITH_EIGEN
endif 

MACROS+=-DWITH_FAKE_GRAD

